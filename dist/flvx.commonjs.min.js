"use strict";function aggregate(){if(!currentViewController)throw new Error('"aggregate" called before first route');currentViewController.render(currentStoreController.render())}function dispatch(e){if(!currentStoreController)throw new Error('"dispatch" called before first route');currentLinkController&&currentLinkController[$traceurRuntime.toProperty(internalDispatch)](e),currentStoreController[$traceurRuntime.toProperty(internalDispatch)](e)}function registerRoute(e,r){if(!(r.storeController instanceof StoreController))throw new Error("Invalid store controller");if(!(r.viewController instanceof ViewController))throw new Error("Invalid view controller");if(r.linkController&&!(r.linkController instanceof LinkController))throw new Error("Invalid link controller");$traceurRuntime.setProperty(routes,e,r)}function route(e,r){var t=routes[$traceurRuntime.toProperty(e)];if(!t)throw new Error('Unknown route "'+route+'"');r=r||{},currentStoreController&&currentStoreController[$traceurRuntime.toProperty(internalOnDisconnected)](),currentLinkController&&currentLinkController[$traceurRuntime.toProperty(internalOnDisconnected)](),currentStoreController=t.storeController,currentLinkController=t.linkController,currentViewController=t.viewController,currentStoreController[$traceurRuntime.toProperty(internalOnConnected)](r),currentLinkController&&currentLinkController[$traceurRuntime.toProperty(internalOnConnected)](),dispatch({type:"routed",route:e})}function getState(e){return state[$traceurRuntime.toProperty(e)]}function setState(e,r){$traceurRuntime.setProperty(state,e,r),dispatch({type:"stateSet",property:e,value:r})}function clearState(e){delete state[$traceurRuntime.toProperty(e)],dispatch({type:"stateCleared",property:e})}var $__1;Object.defineProperties(exports,{StoreController:{get:function(){return StoreController}},Store:{get:function(){return Store}},LinkController:{get:function(){return LinkController}},Link:{get:function(){return Link}},ViewController:{get:function(){return ViewController}},aggregate:{get:function(){return aggregate}},dispatch:{get:function(){return dispatch}},registerRoute:{get:function(){return registerRoute}},route:{get:function(){return route}},getState:{get:function(){return getState}},setState:{get:function(){return setState}},clearState:{get:function(){return clearState}},__esModule:{value:!0}});var children=Symbol(),internalDispatch=Symbol(),internalOnConnected=Symbol(),internalOnDisconnected=Symbol(),Dispatchable=function(){};$traceurRuntime.createClass(Dispatchable,($__1={},Object.defineProperty($__1,internalDispatch,{value:function(e){if(this.dispatch(e),this[$traceurRuntime.toProperty(children)])for(var r,t=this[$traceurRuntime.toProperty(children)][$traceurRuntime.toProperty(Symbol.iterator)]();!(r=t.next()).done;)try{throw void 0}catch(n){n=r.value,n[$traceurRuntime.toProperty(internalDispatch)](e)}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,internalOnConnected,{value:function(e){if(this.onConnected(e),this[$traceurRuntime.toProperty(children)])for(var r,t=this[$traceurRuntime.toProperty(children)][$traceurRuntime.toProperty(Symbol.iterator)]();!(r=t.next()).done;)try{throw void 0}catch(n){n=r.value,n[$traceurRuntime.toProperty(internalOnConnected)](e)}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,internalOnDisconnected,{value:function(e){if(this.onDisconnected(e),this[$traceurRuntime.toProperty(children)])for(var r,t=this[$traceurRuntime.toProperty(children)][$traceurRuntime.toProperty(Symbol.iterator)]();!(r=t.next()).done;)try{throw void 0}catch(n){n=r.value,n[$traceurRuntime.toProperty(internalOnDisconnected)](e)}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,"register",{value:function(e){this[$traceurRuntime.toProperty(children)]||$traceurRuntime.setProperty(this,children,[]),this[$traceurRuntime.toProperty(children)].push(e)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,"dispatch",{value:function(){},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,"onConnected",{value:function(){},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,"onDisconnected",{value:function(){},configurable:!0,enumerable:!0,writable:!0}),$__1),{});var StoreController=function(){$traceurRuntime.defaultSuperCall(this,$StoreController.prototype,arguments)},$StoreController=StoreController;$traceurRuntime.createClass(StoreController,{render:function(){throw new Error('"render" must be implemented by a derived store controller')}},{},Dispatchable);var Store=function(){$traceurRuntime.defaultSuperCall(this,$Store.prototype,arguments)},$Store=Store;$traceurRuntime.createClass(Store,{render:function(){throw new Error('"render" must be implemented by a derived store')}},{},Dispatchable);var LinkController=function(){$traceurRuntime.defaultSuperCall(this,$LinkController.prototype,arguments)},$LinkController=LinkController;$traceurRuntime.createClass(LinkController,{},{},Dispatchable);var Link=function(){$traceurRuntime.defaultSuperCall(this,$Link.prototype,arguments)},$Link=Link;$traceurRuntime.createClass(Link,{},{},Dispatchable);var ViewController=function(){};$traceurRuntime.createClass(ViewController,{render:function(){throw new Error('"render" must be implemented by a derived view controller')}},{});var currentStoreController=null,currentViewController=null,currentLinkController=null,routes={},state={};